import{B as c,C as u,D as G,E as w,G as V,J as h,K as y,L as O,M,N as d,O as i,P as n,Q as _,R,S as m,T as s,U as a,W as x,X as q,aa as A,ba as B,ca as k,ga as J,ia as K,ka as $,pa as L,q as v,qa as P,ra as b,sa as F,t as g,ta as S,u as f,ua as N,va as z,wa as E,xa as D,ya as C}from"./chunk-SYPQPEDA.js";var re=o=>({background:o}),ie=(o,t)=>t.name;function ne(o,t){if(o&1){let e=R();i(0,"div",5),m("click",function(){let l=g(e).$implicit,p=s();return f(p.goToGroup(l))}),i(1,"span",6),m("click",function(){let l=g(e).$implicit,p=s();return f(p.goToGroup(l))}),a(2),n(),i(3,"button",7),m("click",function(){let l=g(e).$index,p=s();return f(p.deleteGroup(l))}),a(4,"\u2715"),n()()}if(o&2){let e=t.$implicit,r=t.$index,l=s();d("ngStyle",q(2,re,l.groupGradients[r%l.groupGradients.length])),c(2),x(" ",e.name," ")}}function ae(o,t){o&1&&(i(0,"div",19),a(1," Group name is required. "),n())}function le(o,t){o&1&&(i(0,"div",19),a(1," Keywords are required. "),n())}function ce(o,t){if(o&1){let e=R();i(0,"div",4)(1,"div",8)(2,"h3",9),a(3,"Create Group"),n(),i(4,"form",10),m("ngSubmit",function(){g(e);let l=s();return f(l.createGroup())}),i(5,"label",11),a(6,"Group Name"),n(),_(7,"input",12),V(8,ae,2,0,"div",13),i(9,"label",14),a(10,"Keywords (comma-separated)"),n(),_(11,"input",15),V(12,le,2,0,"div",13),i(13,"div",16)(14,"button",17),a(15,"Create"),n(),i(16,"button",18),m("click",function(){g(e);let l=s();return f(l.closeCreateGroupPopup())}),a(17,"Cancel"),n()()()()()}if(o&2){let e=s();c(4),d("formGroup",e.groupForm),c(4),d("ngIf",e.groupForm.controls.name.invalid&&e.groupForm.controls.name.touched),c(4),d("ngIf",e.groupForm.controls.keywords.invalid&&e.groupForm.controls.keywords.touched),c(2),d("disabled",e.groupForm.invalid)}}var I=class o{constructor(t,e){this.fb=t;this.router=e;this.groupForm=this.fb.group({name:["",b.required],keywords:["",b.required]})}showCreateGroup=!1;groupForm;groups=[];groupGradients=["linear-gradient(to right,rgb(255, 203, 205),rgb(255, 132, 98))","linear-gradient(to right, #a1c4fd,rgb(29, 137, 183))","linear-gradient(to right, #fbc2eb, #a6c1ee)","linear-gradient(to right, #ff00cc, #333399)","linear-gradient(to right, #2196f3, #f44336)","linear-gradient(to right, #84fab0, #8fd3f4)","linear-gradient(to right, #bdc3c7, #2c3e50)"];ngOnInit(){let t=localStorage.getItem("emailGroups");t&&(this.groups=JSON.parse(t))}openCreateGroupPopup(){this.showCreateGroup=!0}closeCreateGroupPopup(){this.showCreateGroup=!1,this.groupForm.reset()}createGroup(){if(this.groupForm.valid){let{name:t,keywords:e}=this.groupForm.value,r=e.split(",").map(l=>l.trim());this.groups.push({name:t,keywords:r}),localStorage.setItem("emailGroups",JSON.stringify(this.groups)),this.closeCreateGroupPopup()}}goToGroup(t){this.router.navigate(["/organizer/group"],{queryParams:{keywords:t.keywords.join(","),groupName:t.name}})}deleteGroup(t){this.groups.splice(t,1),localStorage.setItem("emailGroups",JSON.stringify(this.groups))}static \u0275fac=function(e){return new(e||o)(u(D),u(K))};static \u0275cmp=G({type:o,selectors:[["app-group-organizer"]],decls:7,vars:1,consts:[[1,"header"],[1,"create-btn",3,"click"],[1,"group-container"],[1,"group-card",3,"ngStyle"],[1,"modal"],[1,"group-card",3,"click","ngStyle"],[1,"group-name",3,"click"],[1,"delete-btn",3,"click"],[1,"modal-content"],[2,"color","black"],[3,"ngSubmit","formGroup"],["for","name",2,"color","black"],["id","name","formControlName","name","type","text"],["class","error",4,"ngIf"],["for","keywords",2,"color","black"],["id","keywords","formControlName","keywords","type","text"],[1,"modal-actions"],["type","submit",3,"disabled"],["type","button",1,"cancel",3,"click"],[1,"error"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"button",1),m("click",function(){return r.openCreateGroupPopup()}),a(2,"+ Create Group"),n()(),i(3,"div",2),O(4,ne,5,4,"div",3,ie),n(),h(6,ce,18,4,"div",4)),e&2&&(c(4),M(r.groups),c(2),y(r.showCreateGroup?6:-1))},dependencies:[k,A,B,C,N,P,F,S,z,E],styles:[".header[_ngcontent-%COMP%]{text-align:left;padding:1rem}.create-btn[_ngcontent-%COMP%]{padding:1rem 1.5rem;margin:2rem;background:linear-gradient(#00c3ff,#ffff1c);border:none;color:#000;border-radius:5px;cursor:pointer;width:200px;font-size:15px;font-weight:700}.group-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;padding:1rem}.group-card[_ngcontent-%COMP%]{margin-left:2rem;background:#2c2c2c;color:#fff;width:170px;height:170px;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 6px #0000004d;transition:transform .2s ease-in-out;font-size:20px;color:#000;font-weight:700}.group-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.delete-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#fff3;border:none;color:#fff;font-size:16px;border-radius:50%;width:24px;height:24px;cursor:pointer;transition:background .2s}.delete-btn[_ngcontent-%COMP%]:hover{background:#fff6}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0009;display:flex;justify-content:center;align-items:center;z-index:999}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;width:400px;box-shadow:0 10px 30px #0000004d;animation:_ngcontent-%COMP%_slideFade .3s ease}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:20px;text-align:center}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-top:15px;margin-bottom:6px}.modal-content[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:14px;border-radius:6px;border:1px solid #ccc;outline:none;transition:border-color .2s}.modal-content[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#3b82f6}.error[_ngcontent-%COMP%]{color:#e53935;font-size:12px;margin-top:5px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:25px}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;font-size:14px;border-radius:6px;cursor:pointer;transition:background .2s ease}.modal-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.modal-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.modal-actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #ccc;color:#333}.modal-actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]:hover{background-color:#f3f3f3}@keyframes _ngcontent-%COMP%_slideFade{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}"]})};var se=(o,t)=>t.id;function de(o,t){if(o&1&&(i(0,"li",9)(1,"div",10),a(2),n(),i(3,"div",11),a(4),n(),i(5,"div",11),a(6),n()()),o&2){let e=t.$implicit,r=s(3);c(2),x(" From: ",r.decodeHtmlEntities(r.getHeader(e.payload.headers,"From"))," "),c(2),x(" Subject: ",r.decodeHtmlEntities(r.getHeader(e.payload.headers,"Subject")||"(No Subject)")," "),c(2),x(" ",r.decodeHtmlEntities(e.snippet)," ")}}function me(o,t){if(o&1&&(i(0,"div",6)(1,"ul",8),O(2,de,7,3,"li",9,se),n()()),o&2){let e=s(2);c(2),M(e.emails)}}function pe(o,t){o&1&&(i(0,"div",7),a(1," No emails found. "),n())}function ue(o,t){if(o&1&&h(0,me,4,0,"div",6)(1,pe,2,0,"div",7),o&2){let e=s();y(e.emails.length>0?0:1)}}var T=class o{constructor(t,e,r){this.gmail=t;this.route=e;this.fb=r}emails=[];groupName="";keywords=[];dateForm;show=!1;ngOnInit(){this.route.queryParamMap.subscribe(t=>{this.groupName=t.get("groupName")||"";let e=t.get("keywords")||"";this.keywords=e.split(",").map(r=>r.trim())}),this.dateForm=this.fb.group({fromDate:["",b.required],toDate:["",b.required]})}showEmails(){let{fromDate:t,toDate:e}=this.dateForm.value;this.dateForm.valid&&this.gmail.getEmailsByDateRange(t,e).then(r=>{let l=r.filter(p=>{let Q=this.getHeader(p.payload.headers,"Subject")||"",U=this.gmail.extractPlainText(p.payload)||"",W=(Q+" "+U).toLowerCase();return this.keywords.some(X=>{let Z=X.toLowerCase();return W.includes(Z)})});this.emails=l,this.show=!0})}decodeHtmlEntities(t){let e=document.createElement("textarea");return e.innerHTML=t,e.value}getHeader(t,e){return t.find(r=>r.name===e)?.value||""}static \u0275fac=function(e){return new(e||o)(u(L),u(J),u(D))};static \u0275cmp=G({type:o,selectors:[["app-group-details"]],decls:11,vars:3,consts:[[3,"ngSubmit","formGroup"],[1,"form-group"],["type","date","formControlName","fromDate"],[1,"label"],["type","date","formControlName","toDate"],["type","submit",1,"b",3,"disabled"],[1,"same"],[1,"same",2,"text-align","center","color","#ccc","margin-top","2rem"],[1,"email-list"],[1,"email-item"],[1,"from"],[1,"subject"]],template:function(e,r){e&1&&(i(0,"form",0),m("ngSubmit",function(){return r.showEmails()}),i(1,"div",1)(2,"label"),a(3," From: "),_(4,"input",2),n(),i(5,"label",3),a(6," To: "),_(7,"input",4),n(),i(8,"button",5),a(9,"Analyze"),n()()(),h(10,ue,2,1)),e&2&&(d("formGroup",r.dateForm),c(8),d("disabled",!r.dateForm.valid),c(2),y(r.show?10:-1))},dependencies:[C,N,P,F,S,z,E],styles:[".form-group[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:50px}.same[_ngcontent-%COMP%]{margin-left:3rem;margin-right:3rem}.email-list[_ngcontent-%COMP%]{list-style:none;padding:0;border:1px solid #ccc;color:white,}.email-item[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #eee;cursor:pointer;transition:background .2s}.email-item[_ngcontent-%COMP%]:hover{background:#3c3c4e}.subject[_ngcontent-%COMP%]{font-weight:700;color:#fff;margin-bottom:.3rem}.from[_ngcontent-%COMP%]{font-size:.9rem;color:#fff}.label[_ngcontent-%COMP%]{padding-left:1rem}.b[_ngcontent-%COMP%]{margin-left:1rem}"]})};var ge=[{path:"",component:I},{path:"group",component:T}],j=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=w({type:o});static \u0275inj=v({imports:[$.forChild(ge),$]})};var Y=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=w({type:o});static \u0275inj=v({imports:[k,j,C]})};export{Y as EmailOrganizerModule};
